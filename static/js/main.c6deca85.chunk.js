(this.webpackJsonpmmi=this.webpackJsonpmmi||[]).push([[0],{113:function(e,t,n){},221:function(e,t,n){"use strict";n.r(t);var r,c,a,i=n(0),o=n.n(i),s=n(23),u=n.n(s),l=(n(113),n(3)),j=n(30),b=n(31),d=n(5),f=n(1),O=n(91),m=n(226),h=n(225),p=n(2),v=function(e,t){var n=Object(i.useState)(e),r=Object(l.a)(n,2),c=r[0],a=r[1];return Object(i.useEffect)((function(){var e=setInterval((function(){c>0&&t&&a(c-1),0===c&&clearInterval(e)}),1e3);return function(){clearInterval(e)}}),[a,c,t]),n},x=function(e){var t=e.timer,n=function(e){var t=e.toString();return/^[0-9]$/.test(t)?"0"+t:e};return Object(p.jsxs)("div",{children:[n(Math.trunc(t/3600)),":",n(Math.trunc(t/60)%60),":",n(t%60)]})},g=function(e){return e.chess?Object(p.jsx)("div",{children:e.chess.history({verbose:!0}).filter((function(t){return t.color===e.player})).map((function(e,t){return Object(p.jsxs)("div",{children:[t+1,". from ",e.from," to ",e.to]},e.from+e.to)}))}):null},y=n.p+"static/media/orn.1d5d535f.png",S=b.a.div(r||(r=Object(j.a)(["\n    margin: 50;\n"]))),w=function(e){var t=e.player,n=e.marked,r=e.chess,c=e.playerColor,a=e.timer,i=e.showTimer;return Object(p.jsxs)(S,{marked:n,player:c,children:[Object(p.jsx)("h2",{children:t}),Object(p.jsx)("img",{src:y,alt:""}),n&&Object(p.jsx)("h3",{children:"It is your turn!"}),i&&Object(p.jsx)(x,{timer:a}),Object(p.jsx)(g,{chess:r,player:c})]})},k=n.p+"static/media/Magic.cc753f6b.png",C=(n(63),n(95)),N=n.n(C),P=n(45),q=n.n(P),L=n(58),I=n.n(L),T=n(54),M={p:["pawn","phone","on","born","palm"],n:["knight","night","light"],b:["bishop"],r:["rook","rock"],q:["queen"],k:["king"]},B=[["see","c"],["die","d"],["for","4"],["andy","undo"],["andrew","undo"]],E=b.a.div(c||(c=Object(j.a)(["\n    border: 2px solid tomato;\n    padding: 10px;\n    position: relative;\n"]))),A=n(122),D=function(e){var t=e.bPlayer,n=e.wPlayer,r=e.playTime,c=Object(i.useState)(new A("rnbqkbnr/pppppppp/8/8/8/8/PPPPPPPP/RNBQKBNR w KQkq - 0 1")),a=Object(l.a)(c,1)[0],o=Object(i.useState)(a.fen()),s=Object(l.a)(o,2),u=s[0],j=s[1],b=Object(P.useSpeechRecognition)(),x=b.transcript,g=b.resetTranscript,y=b.listening,S=Object(i.useState)(null),C=Object(l.a)(S,2),L=C[0],D=C[1],F=Object(i.useState)(null),H=Object(l.a)(F,2),R=H[0],G=H[1],Q=Object(i.useState)(),U=Object(l.a)(Q,2),J=U[0],K=U[1],$=Object(i.useState)(),z=Object(l.a)($,2),V=z[0],W=z[1],X="w"===a.turn(),Y=v(r,"w"===a.turn()),Z=Object(l.a)(Y,2),_=Z[0],ee=Z[1],te=v(r,"b"===a.turn()),ne=Object(l.a)(te,2),re=ne[0],ce=ne[1],ae=Object(i.useState)([[r,r]]),ie=Object(l.a)(ae,2),oe=ie[0],se=ie[1];Object(i.useEffect)((function(){if(x){var e=function(e){e=e.toLowerCase();var t,n=Object(O.a)(B);try{for(n.s();!(t=n.n()).done;){var r=t.value;e=e.replaceAll(r[0],r[1])}}catch(c){n.e(c)}finally{n.f()}return e}(x);console.log(e);var t=x.match(/[a-hA-H]+[1-8].*(?:to|2).*[a-hA-H]+[1-8]/g);if(t){var n=t[0].toLowerCase();D(n.substring(0,3).trim()),G(n.substring(n.length-2).trim())}else{var r=function(e,t){var n=t.match(/[a-hA-H]+\s?[1-8]/g);if(!n)return{};var r=Object.entries(M).reduce((function(e,n){var r=Object(l.a)(n,2),c=r[0];return r[1].some((function(e){return t.toLowerCase().includes(e)}))&&!e?c:e}),void 0),c=n[0].toLowerCase().replace(" ","");if(r&&c){var a=e.SQUARES.filter((function(t){var n=e.get(t);return(null===n||void 0===n?void 0:n.color)===e.turn()&&n.type===r})).map((function(t){if(1===e.moves({square:t,verbose:!0}).filter((function(e){return e.to===c})).length)return{from:t,to:c}})).filter((function(e){return e}));return a.length>1?{error:"Multiple possible pieces for that move"}:{move:a[0]}}return{}}(a,e);if(r.move)return D(r.move.from),void G(r.move.to);if(r.error)return void W(r.error||"Did not understand");var c=x.match(/[a-hA-H]+[1-8]/g);if(c){var i=c[0].toLowerCase();return L?G(i):D(i),void W(null)}e.includes("undo")&&be()}}}),[x]),Object(i.useEffect)((function(){L&&R&&(ue({from:L,to:R}),D(null),G(null))}),[L,R]);var ue=function(e){W(null),a.move(e)&&(j(a.fen()),se((function(e){return e?[[_,re],e[0]]:[[_,re]]})))},le=function(){y?q.a.stopListening():(g(),W(null),q.a.startListening({continuous:!1,language:"en-US"}))},je=function(e){"Space"===e.code&&(e.preventDefault(),le())};Object(i.useEffect)((function(){return window.addEventListener("keydown",je),function(){return window.removeEventListener("keydown",je)}}),[]);var be=function(){if(oe&&oe[1]){a.undo();var e=Object(l.a)(oe[1],2),t=e[0],n=e[1];ee(t),ce(n),se((function(e){return e?[e[1]]:null})),j(a.fen())}};return Object(p.jsxs)("div",{className:"mainwrapper",children:[Object(p.jsxs)("div",{className:"controls",children:[Object(p.jsx)("img",{className:"logo",onClick:le,src:k,alt:"press to speak button"}),y?"Listening...":"Click to talk or press the Space key...",Object(p.jsx)("button",{disabled:!(oe&&oe[1]),onClick:be,children:"Undo"}),Object(p.jsx)("div",{children:V&&!y&&Object(p.jsx)(E,{children:V})})]}),Object(p.jsx)("div",{children:Object(p.jsx)(m.b,{className:"main",children:Object(p.jsxs)(h.a,{id:"layout",children:[Object(p.jsx)(I.a,{className:"sideBar sideBarSlyth ".concat(X?"":"active"),width:"300",children:Object(p.jsx)(w,{player:t,playTime:r,marked:!X,chess:a,playerColor:"b",timer:re,showTimer:0!==r})}),Object(p.jsx)(T.Content,{className:"flex-center",children:Object(p.jsx)(N.a,{width:800,position:u,onDrop:function(e){D(null),ue({from:e.sourceSquare,to:e.targetSquare,promotion:"q"})},squareStyles:Object(f.a)(Object(f.a)({},L?Object(d.a)({},L,{backgroundColor:"orange"}):{}),J?Object(d.a)({},J,{backgroundColor:"orange"}):{}),onSquareClick:function(e){L?G(e):D(e)},onMouseOverSquare:K})}),Object(p.jsx)(I.a,{width:"300",className:"sideBar sideBarGryf ".concat(X?"active":""),children:Object(p.jsx)(w,{player:n,playTime:r,marked:X,chess:a,playerColor:"w",timer:_,showTimer:0!==r})})]})})})]})},F=function(e){var t=Object(i.useState)(""),n=Object(l.a)(t,2),r=n[0],c=n[1],a=Object(i.useState)(""),o=Object(l.a)(a,2),s=o[0],u=o[1],j=Object(i.useState)(0),b=Object(l.a)(j,2),d=b[0],f=b[1];return Object(p.jsxs)("div",{className:"intro",children:[Object(p.jsx)("img",{src:k,alt:"logo"}),Object(p.jsxs)("form",{onSubmit:function(t){e.handleSubmit(t,r,s,d)},children:[Object(p.jsxs)("div",{className:"formItem",children:[Object(p.jsx)("label",{children:"Name of Gryffindor player:"}),Object(p.jsx)("input",{type:"text",value:s,required:!0,onChange:function(e){u(e.target.value)}})]}),Object(p.jsxs)("div",{className:"formItem",children:[Object(p.jsx)("label",{children:"Name of Slytherin player:"}),Object(p.jsx)("input",{type:"text",value:r,required:!0,onChange:function(e){c(e.target.value)}})]}),Object(p.jsxs)("div",{className:"formItem",children:[Object(p.jsx)("label",{children:"Pick your chess timer:"}),Object(p.jsxs)("select",{value:d,onChange:function(e){f(parseInt(e.target.value))},required:!0,children:[Object(p.jsx)("option",{value:10,children:"10/10 Minutes"}),Object(p.jsx)("option",{value:20,children:"20/20 Minutes"}),Object(p.jsx)("option",{value:60,children:"60/60 Minutes"}),Object(p.jsx)("option",{value:0,children:"without time limit"})]})]}),Object(p.jsx)("input",{type:"submit",value:"Start Game",className:"formItem"})]})]})},H=b.a.div(a||(a=Object(j.a)(["\n    display: flex;\n    justify-content: center;\n    align-items: center;\n    margin-top: 30px;\n"]))),R=function(){var e=Object(i.useState)(""),t=Object(l.a)(e,2),n=t[0],r=t[1],c=Object(i.useState)(""),a=Object(l.a)(c,2),o=a[0],s=a[1],u=Object(i.useState)(0),j=Object(l.a)(u,2),b=j[0],d=j[1],f=Object(i.useState)(!1),O=Object(l.a)(f,2),m=O[0],h=O[1];return Object(p.jsx)(H,{children:m?Object(p.jsx)(D,{bPlayer:n,wPlayer:o,playTime:60*b}):Object(p.jsx)(F,{handleSubmit:function(e,t,n,c){e.preventDefault(),r(t),s(n),d(c),h(!0)}})})},G=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,227)).then((function(t){var n=t.getCLS,r=t.getFID,c=t.getFCP,a=t.getLCP,i=t.getTTFB;n(e),r(e),c(e),a(e),i(e)}))};u.a.render(Object(p.jsx)(o.a.StrictMode,{children:Object(p.jsx)(R,{})}),document.getElementById("root")),G()},63:function(e,t,n){}},[[221,1,2]]]);
//# sourceMappingURL=main.c6deca85.chunk.js.map